# О проекте
В проект включен [Handlebars](https://handlebarsjs.com/guide/) и [Typescript](https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html).<br/>
Билд происходит в папку dist.<br/>
Для верстки нескольких страниц активная страница переключается в файле `.env` в переменной `PAGE_NAME`<br/>
Основной js файл `src/js/index.ts`. Всё подключается в него.
<br/>
# Установка
После клонирования репозитория нужно выполнить команды<br/>
```
npm install
npm rum dev
```
<br/>

# Описание
В корне есть директория `pages` внутри должны находится страницы проекта. Структура такая что страница это директория с уникальным именем внутри которой находится `index.html`. <br/> 
В `html` должен находится код подключения `hbs` файла страницы `{{> page-contacts }}`.<br/> 
В `hbs` файлах пути до медиафайлов должны начинаться с `/`, без слэша будет работать только в dev режиме, это нужно для билда. Путь должен начинаться от директории `public`, например `/assets/media/images/image.jpg`<br/>

## Шаблоны
Шаблоны создаются в директории `src/templates`.
Структура разбита на директории для удобства, при желании можно расшрить эту структуру:
> pages - страницы<br/>
> sections - секции страниц(крупные блоки со своей зоной отвественности)<br/>
> layouts - общие блоки для сайта(header, footer, modal, ...)<br/>
> shared - небольшие переиспользуемые элементы(кнопки, инпуты и т.д.)<br/>

## Handlebars context
Для сложных `hbs` шаблонов можно создать контекст 2 способами:<br/>
1. В корне директория `context` внутри неё `json` файлы с названиями контекста -> `product.json`. Доступ контексту через название файла с добавлением `"-context"` -> `product-context`<br/>
2. По пути `src/templates` в любой директории создать файл `context.json`. Доступ контексту через название директории в которой лежит `context.json` с добавлением `"-context"` -> `имя-директории-context`

### Настройки
Настройки для стилей лежат в `src/settings`. При желании можно вынести и другие общие настройки для проекта в эту директорию. Пока что там лежат настройки для `breakpoints`, а так же миксины и т.п.<br/>
Для медиазапросов с указанными `breakpoints` необходимо подключать их в `scss` файлах:<br/>
> @use "sass:map";<br/>
> @use "/src/settings/styles/breakpoints/breakpoints";<br/>

Использование:
```
@media (min-width : map.get(breakpoints.$breakpoints-min, lg)) {
  стили...
}
```
## Helpers
В `system/handlebarsHelpers.ts` есть переменная `handlebarsHelpers` в которой сохранены [кастомные хелперы Handlebars](https://handlebarsjs.com/guide/#custom-helpers). Их так же можно расширять или изменять при необходимости.
Ещё в `src/js/helpers` есть некоторые вынесенные методы для работы, самый сложный из них это `mqData` в файле `media.ts`.<br/>

Особенность работы `mqData` заключается в том чтобы связывать `breakpoints` из `scss` файла с javascript. По своей сути это функция которая возвращает объект с такими данными:<br/>
```
const {addMediaAction, isDevice, breakpoints} = mqData()

addMediaAction - функция добавления события для срабатывании на указанных брейкпоинтах. В самом файле есть пример использования
isDevice - объект с ключами mobile/tablet/pc каждый из которых указывает какой в момент получения девайс
breakpoints - объект с брейкпоинтами из $breakpoints-min в scss в котором есть метод toNumbers возвращающий их в числовом виде, в исходном они такие "768px"
```
## Common
Есть директория `src/common`. В ней хранятся общие стили и js, которые не относятся к остальным шаблонам и библиотекам. Тут хранятся глобальные стили для приложения, css переменные, типографика и всё что можно вынести как что - то ни к чему не относящееся, например стили контейнера, `reset.scss` и т.д. В js есть объект `app` в котором инициализируются всякие зависимости для css и прочего, а так же находятся методы влияющие глобильно на приложение. Так же есть директория `globalActions` в которой находится глобальный обработчик клика в js. Нужен для делегирования событий. Получает данные через атрибут `data-global-action`. Так же это можно оптимизировать получше при желании.<br/>

Особенность его работы такая:<br/>
> 1. Глобально на document вешается обработчик<br/>
> 2. Через функцию getEventData(event) получается информация о клике(elem - куда был клик, target - на чем висит data-global-action, action - значение data-global-action, key - нажаная кнопка клавиатуры(нужно использовать на событии клавиатуры, а не клика))
> 3. Далее на основе того что мы получили можно выполнять другие методы

